**20 Août**
- [ ] ESL
    - [ ] ESL-421 Création de template : Ajustements
        - harmoniser la position de toolbar à la selection de l'objet canvas
        Fait en supprimant le facteur zoom : 
        ```
        private positionToolbar(selected: any): void {

            if (this.toolbar && selected) {
            const toolbarEl = this.toolbar.nativeElement;
            const canvasRect = this.canvas.getElement().getBoundingClientRect();

            const left = window.innerWidth * 0.15;
            const top = window.innerHeight * 0.15;

            toolbarEl.style.display = 'block';
            toolbarEl.style.position = 'absolute';
            toolbarEl.style.left = `${left}px`;
            toolbarEl.style.top = `${top}px`;
            toolbarEl.style.zIndex = '1000';
            }
        }
        ```
        - agrandir la typo des textes des menus
        ajout des mentions dans les <label>
        ```place-content-center pe-4 mb-2 text-xl```

        - désélectionner l'objet quand on clique hors du canvas
        refonte du ngAfterViewInit
        ```
        const onDocumentMouseDown = (event: MouseEvent) => {
            if (!this.canvas) return;

            const target = event.target as Node;

            const wrapper = (this.canvas as any).wrapperEl as HTMLElement | undefined;
            const upper   = this.canvas.upperCanvasEl as HTMLElement;
            const lower   = this.canvas.getElement() as HTMLElement;

            const clickedInToolbar = this.toolbar?.nativeElement?.contains(target) ?? false;

            const path = (event.composedPath ? event.composedPath() : []) as EventTarget[];
            const clickedInsideCanvas =
            (wrapper && (path.includes(wrapper) || wrapper.contains(target))) ||
            path.includes(upper) || upper.contains(target) ||
            path.includes(lower) || lower.contains(target);

            if (!clickedInsideCanvas && !clickedInToolbar) {
            if (this.canvas.getActiveObject()) {
                this.canvas.discardActiveObject();
                this.canvas.requestRenderAll();
                this.hideToolbar();
            }
            }
        };

        (this as any)._onDocumentMouseDown = onDocumentMouseDown;
        document.addEventListener('mousedown', onDocumentMouseDown);
        }

        ngOnDestroy() {
            if ((this as any)._onDocumentMouseDown) {
            document.removeEventListener('mousedown', (this as any)._onDocumentMouseDown);
            }
        }
        ```

        - mettre une scale mini pour éviter aux objets d'etre illisibles

        - quand on rotate, les centimes ne sont plus alignés
        Suppression de la possibilité de rotation des objets canvas
        ```
        private initializeCanvas(): Promise<void>{

            ...

        this.canvas.on('object:added', (e) => {
            if (e.target) {
            e.target.setControlsVisibility({
                mtr: false // enlève la rotation
            });
            }
        });
        }
        ```

        - duplicata du signe de currency car append à $price$ de base. à enlever

        - modifier l'aperçu pour prendre en compte tous les champs variables

        - doublon du dropdown changement de couleur pour texte & formes sachant que les deux interagissent avec les objets canvas selectionnés

        - le dropdown de devise ne change pas l'affichage dans le canvas
        