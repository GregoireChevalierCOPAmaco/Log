**06 Octobre**
- [ ] ESL
    - [ ] ESL-433 Adapter le mqtt au syst√®me Bowtz pour communiquer entre back & base
        - [ ] R√©union avec Anthony pour r√©cup√©rer les infos de ce qu'il a d√©j√† pu faire.
        - [x] Recherche du switch pour brancher la base Bowtz par PoE
        - [x] Rangement du bureau de tests et recherche du switch
        - [ ] Reprise de la doc (file:///C:/Users/gchevalier/Desktop/AP%205.0_New%20Edition%20User%20Manual(1).pdf)
            - [ ] Check doc sur le passage du pc en DHCP (https://www.tencentcloud.com/techpedia/101131)
        - [ ] R√©cup√©ration de la doc utilisation swagger chinois : (https://pcnzqr9f3bx9.feishu.cn/wiki/SDjuwaCmairr1lk8Sh9cw63SnBi)

- [ ] R√©union mercredi 08 octobre service digital
    - [x] Prise de connaissance de l'√©change de mails
    - [x] Mail de pr√©paration 
    - [x] 

**08 Octobre**
- [ ] ESL
    - [ ] ESL-448 Ajouter le lancement des containers docker dans le script de d√©ploiement
        - [x] Ajout au script containers check ps1
        ```
        function Start-DockerComposeIfNeeded {
            Write-Host "V√©rification de l'√©tat des containers Docker..."

            # V√©rifier si au moins un des conteneurs est en cours d'ex√©cution
            $requiredContainers = @("esl_api", "esl_front", "postgres", "mongodb", "mqtt_api", "mqtt_broker")
            $runningContainers = docker ps --format "{{.Names}}"

            $missing = @()
            foreach ($container in $requiredContainers) {
                if ($runningContainers -notcontains $container) {
                    $missing += $container
                }
            }

            if ($missing.Count -gt 0) {
                Write-Host "Les containers suivants ne sont pas actifs : $($missing -join ', ')"
                Write-Host "Lancement de docker compose..."

                try {
                    docker compose --env-file .env.dev -f docker-compose.prod.yml up --build -d
                    Write-Host "Docker Compose lance avec succes."
                } catch {
                    Write-Host "Erreur lors du lancement de Docker Compose : $_"
                }
            } else {
                Write-Host "Tous les containers requis sont deja en cours d'execution."
            }
        }

        Start-DockerComposeIfNeeded
        ```
    - [ ] ESL-433 Adapter le mqtt au syst√®me Bowtz pour communiquer entre back & base


**09 Octobre**
- [x] Installation des bureaux assis-debout. Jour √† marquer d'une pierre blanche
- [ ] ESL
    - [ ] ESL-433 Adapter le mqtt au syst√®me Bowtz pour communiquer entre back & base
        - [x] R√©cup√©ration du token swagger pour les requ√™tes : 
        ```
        MIIBUwIBADANBgkqhkiG9w0BAQEFAASCAT0wggE5AgEAAkEAoadAWOgUlVZ5PMpX0abomhp5QJSxBme50f0Pt26o8oLVOl8F9NQuhiZri+qCI6HvzaPwi+zH+QcyXzoi7dS+nQIDAQABAkBUvgzpjqBbuT1NNPXcnhcJ0h8GT+yNYwrynisDCivfFQf4h5EG0VxtBpjB6ZC2dlqm90L4raBvQpfmNnNd4RwxAiEA6ASOIbpHFyXFDPe+qWdCBtvNH23wqM0xfUwY6bkHz6MCIQCyXMZ6T9CEYzB5m9BiMusX99DXYHJhx7IBq0UJuTkcvwIgFKvrOegN02sjDk+4ZgF0KYZF1UoHShLWGPLBuXkpz/8CIE2x5DN7eRVyL7eJjCh6jbYPGUX4mVrGpl/bv2MQ8DP5AiAK+oc8mT74QBSfk4lQxcQgOoy3OarcgBhVGzqv1CyfDw==
        ```
        - [x] Demande √† chat concernant les design patterns √† utiliser pour faire √ßa proprement, r√©ponse : 
        ```
        üß© Pattern recommand√© : Strategy + Factory

        C‚Äôest la combinaison id√©ale ici.

        1Ô∏è‚É£ Strategy Pattern

        Ce pattern te permet de d√©finir une interface commune pour tous les comportements possibles (ici : les traitements EEG), et de s√©parer la logique de chaque type dans une classe diff√©rente.

        2Ô∏è‚É£ Factory Pattern

        La factory est charg√©e de cr√©er dynamiquement la bonne strat√©gie selon le type d‚ÄôEEG d√©tect√©.

        üß† Variante : Pattern Abstract Factory

        Si chaque type d‚ÄôEEG a plusieurs services associ√©s (par exemple un service de traitement, un service d‚Äôaffichage et un service de stockage), tu peux monter d‚Äôun cran avec Abstract Factory.

        Cela te permet de regrouper la cr√©ation de tout l‚Äô√©cosyst√®me d‚Äôun type d‚ÄôEEG.
        ```
        MAIS
        On va pas alourdir le projet avec √ßa et vaut mieux dev une api from scratch d√©di√©e √† bowtz avec fastAPI en python pour supplanter le mqtt. C'est ESL bridge que je vais refaire.
    finir SID d'abord, faire le bridge esl bowtz apres

**10 Octobre**
- [x] D√©brief BRIDGE : 
    - Pour r√©aliser efficacement la demande d'adapter bowtz, mieux vaut dupliquer le projet, et g√©rer le cas √† part
        - Dupliquer le projet
        - Supprimer les mentions au mqtt
        - Cr√©er une FastAPI qui r√©ponde √† la borne
        - Rediriger les requ√™tes du swagger vers la FastAPI
        - Pr√©calculer en ram un maximum via getallesls
        - Cr√©er un container docker
        - Ajouter le docker au compose
        - D√©velopper les fonctionnalit√©s
- [ ] ESL
    - [ ] ESL-449 Fix le blink des ESLs depuis ESL table    
        - [x] ```git checkout -b fix/ESL449-450_last_fixes```
        - [x] Cr√©ation d'un component d√©di√© au ag grid action : 
        ```
        import { Component } from "@angular/core";
        import { EslTableComponent } from "./esl-table.component";

        @Component({
        selector: 'app-esl-actions-cell',
        template: `
            <div class="flex flex-col">
            <button class="bg-gray-300 px-2 mt-2 py-1 rounded" (click)="onEdit()">Modifier</button>
            <button class="bg-green-500 mb-2 mt-2 text-white px-2 py-1 rounded" (click)="onBlink()">Clignoter</button>
            <button *ngIf="data.store_article?.id" class="bg-orange-500 text-white px-2 py-1 rounded" (click)="onDissociate()">Dissocier</button>
            </div>
        `
        })
        export class EslActionsCellComponent {
        data: any;
        constructor(private parent: EslTableComponent) {}
        
        agInit(params: any) { this.data = params.data; }

        onEdit() { this.parent.redirectToManagement(this.data.id_esl, this.data.width, this.data.height); }
        onBlink() { this.parent.blinkEsl(this.data.id_esl, '#00FF00'); }
        onDissociate() { this.parent.dissociateEsl(this.data.id_esl); }
        }
        ```
        - [x] Appel dans le component esl table : 
        ```
        columnDefs = [
            { headerName: 'ID ESL', field: 'id_esl',  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { headerName: 'Style associ√©', field: 'style.name',  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { headerName: 'Largeur', field: 'width' ,  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { headerName: 'Hauteur', field: 'height',  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { headerName: 'Connexion', field: 'average_rssi', cellRenderer: this.signalRenderer,  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { headerName: 'Niveau de batterie', field: 'power', valueFormatter: ({ value }: ValueFormatterParams) => `${value}%`,  headerClass: 'bg-gray-800 text-white font-semibold', cellClass: 'clickable-cell', 
            onCellClicked: (params: any) => this.redirectToManagement(params.data.id_esl, params.data.width, params.data.height)},
            { 
            headerName: 'Op√©rations', 
            field: 'id_esl', 
            cellRenderer: EslActionsCellComponent, 
            autoHeight: true,
            headerClass: 'bg-gray-800 text-white font-semibold'
            }
        ];
        ```
        bon en fait c'est juste l'encodage de #00FF00 qui merdait, en utilisant encodeURIComponent √ßa passe tout seul
    - [ ] ESL-450 Aligner et centrer le texte et les ic√¥nes des boutons dans la page de configuration d'une ESL