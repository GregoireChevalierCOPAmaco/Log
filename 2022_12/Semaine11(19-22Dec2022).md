**19 Décembre**
- [x] Mise en commenatire du code de test du le mailer SES amazon :
```
describe('Teting the mail sending', () => {
    it('should send an email', async () => {
        let toAddress: string = 'adresse.test@mail.com';
        const SES = service.sendSesMail(toAddress);
        const client = new SESClient({ region: "eu-central-1" });
        const sendMailCommand = service.createSendEmailCommand(
            toAddress,
            'serviceIT@cop-amaco.com'
            );
        const result = await client.send(sendMailCommand);
        console.log(result);
        
        expect(SES).toBeDefined();
        expect(typeof(SES)).toBe("object");
    });
});
```
- [x] Cleanup de la branche pour passage des tests
    - [x] Rebuild du docker, repasse des tests (tous OK)
    - [x] Refonte du readme 
        - [x] Readme global : suppression des indications de tests
        - [x] Readme front : modification des indications de tests
        - [x] Readme back : ajout des indications de tests back & résultats attendus
    - [x] Commit, push & pull request, mais pas de merge atm le temps de voir si on peut utiliser amazon pinpoint au lieu de ses pour rester en mode sandbox
- [x] Lecture de doc amazon Pinpoint
    - [x] Check de (https://docs.aws.amazon.com/fr_fr/pinpoint/latest/userguide/welcome.html)
- [x] Création d'un service pinpoint
    - [ ] Configuration d'amazon pinpoint SMTP user
    - [ ] Configuration d'amazon pinpoint SMTP password
- [x] Merge du code ses
    - [x] Résolution des nombreux conflits
        - [x] Repartir de devlop clean : pull la nouvelle refacto
        - [x] Création de branche 293 bis && recréation des fichiers SES
        - [x] Re modification des fichiers env.dev & env.local
        - [x] Réécriture des imports
            - [x] app.module.ts
            - [x] auth.module.ts
            - [x] pieces.controller.spec.ts
            - [x] regional-management.controller.spec.ts
            - [x] reports.controller.spec.ts
            - [x] reports.module.ts
            - [x] reports.service.spec.ts
            - [x] store.controller.spec.ts
            - [x] tickets.controller.spec.ts
            - [x] users.controller.spec.ts
            - [x] users.module.ts
            - [x] users.service.spec.ts
            - [x] users.service.ts
            - [x] vehicles.controller.spec.ts
    - [x] Docker system purne -a -f
    - [x] npm install @aws-sdk/client-ses
    - [x] docker-compose up --build
- [x] Tests qui passent
- [x] Commit de la branche mailing ok
- [ ] Reprise du survol du projet Atmos ITS
    - [x] npm i --force dans les dossiers ./atmos && ./atmos-back && ./atmos-cleint pour résolution des diverses erreurs locales
    - [ ] Mise en route du projet
        - [x] Dans le dossier :
        ```
        atmos\portail-socle-1.0.4\deploy>
        ```
        lancement de commande : 
        ```
        docker-compose up --build
        ```
        - [x] Lancement du front avec :
        ```
        cd .\portail-client-1.0.4\

        npm i

        ng serve
        ``` 
        - [x] Connexion à http://localhost:4200/ avec les identifiants du readme.md : admin-cop / cop123
        - [ ] Résolution de l'erreur : 
        ```
        Erreur lors de la réception des informations du magasin

        Error occurred while proxying request localhost:4200/magasins/for-current-user to http://localhost:3000/ 
        [ECONNREFUSED] (https://nodejs.org/api/errors.html#errors_common_system_errors)
        ```
    - [ ] Poursuite du survol du code
        - [x] Étude du code du docker-compose.yml dans le dossier portail-socle-1.0.4
            - [x] Check du retour console docker du container atmos-flyway-1 : 
            ```
            2022-12-19 14:51:18 Database: jdbc:postgresql://db:5432/copamaco_portail (PostgreSQL 14.5)
            Successfully validated 5 migrations (execution time 00:00.035s)
            Creating Schema History table "public"."flyway_schema_history" ...
            Current version of schema "public": << Empty Schema >>
            Migrating schema "public" to version "1.0.0 - create tables magasin"
            Migrating schema "public" to version "1.0.1 - create tables audio"
            Migrating schema "public" to version "1.0.2 - insert magasin"
            Migrating schema "public" to version "1.0.3 - insert audios"
            Migrating schema "public" to version "1.0.4 - change table magasin"
            Successfully applied 5 migrations to schema "public", now at version v1.0.4
            ```
            À priori 5 migrations sont faites. Trouver leur provenance : les migrations sont définies dans les fichiers du dossier :
            ```
            atmos\portail-socle-1.0.4\flyway\sql
            ```
        - [ ] Survol des tests
            - [ ] Survol des tests du back
            - [x] Run des tests du back : 
            ```
            Test Suites: 3 failed, 1 passed, 4 total
            Tests:       6 failed, 5 passed, 11 total
            Snapshots:   0 total
            Time:        12.361 s
            ```

