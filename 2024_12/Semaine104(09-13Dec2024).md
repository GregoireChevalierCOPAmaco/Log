**09 Décembre**
- [ ] Esl
    - [ ] Rebuild d'atmos
        - [x] Connexion à l'instance
            - [x] ouverture d'une console dans le dossier Desktop/aws
            - [x] ```ssh -i "atmosPROD.pem" ubuntu@ec2-18-196-123-81.eu-central-1.compute.amazonaws.com```
            Résultata erreur :
            ```
            ubuntu@ec2-18-196-123-81.eu-central-1.compute.amazonaws.com: Permission denied (publickey).
            ```
            ```
            ssh -i "AtmosIDKEY.pem" ubuntu@ec2-18-196-123-81.eu-central-1.compute.amazonaws.com
            ```
        - [x] Restart des scripts
        ```
        sudo docker compose -f /home/ubuntu/data/atmos-conf/deploy/docker-compose-cert.yml up -d
        docker restart atmos_proxy
        ```
    - [x] Création et switch sur branche :
    ```
    git checkout feat/ESL-228_menu_toDisable_esls_fromWebApp   
    ```
    - [ ] ESL-232 Créer un menu pour changer l'image des ESLs depuis l'app web
        - [x] ```ng generate component EslManagement```
        - [x] html : 
        ```
        <div class="container">
            <h2>ESL Management</h2>
            <form (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="eslId">ESL ID</label>
                <input type="text" id="eslId" class="form-control" [(ngModel)]="eslId" name="eslId" required>
            </div>
            <div class="form-group">
                <label for="image">Upload Image</label>
                <input type="file" id="image" class="form-control" (change)="onFileChange($event)" accept="image/*" required>
            </div>
            <button type="submit" class="btn btn-primary" [disabled]="!eslId || !imageFile">Send</button>
            </form>
        </div>
        ```
        - [x] component : 
        ```
        import { Component } from '@angular/core';
        import { EslService } from '../../services/esl.service';

        @Component({
        selector: 'app-esl-management',
        templateUrl: './esl-management.component.html',
        styleUrls: ['./esl-management.component.css']
        })
        export class EslManagementComponent {
        eslId: string = '';
        imageFile: File | null = null;
        base64Image: string | null = null;

        constructor(private eslService: EslService) {}

        onFileChange(event: any) {
            const file = event.target.files[0];
            if (file) {
            this.imageFile = file;
            this.convertImageToBase64(file);
            }
        }

        convertImageToBase64(file: File) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => {
            this.base64Image = reader.result as string;
            };
            reader.onerror = (error) => {
            console.error('Error converting image to base64:', error);
            };
        }

        onSubmit() {
            if (this.eslId && this.base64Image) {
            const base64String = this.base64Image.split(',')[1];
            this.eslService.updateEslImage(this.eslId, base64String).subscribe(
                response => {
                console.log('Image updated successfully', response);
                },
                error => {
                console.error('Error updating image', error);
                }
            );
            }
        }
        }
        ```
        - [x] Ajout dans le service frontend : 
        ```
        updateEslImage(id_esl: string, image: string): Observable<any> {
            const body = {
            id_esl: id_esl,
            image: image
            };
            return this.httpClient.post(`${this.route}/esl_set_image`, body);
        }
        ```
        - [x] fix du NG8002: Can't bind to 'formGroup' since it isn't a known property of 'form'en ajoutant dans les imports du component : 
        ```
        @Component({
        selector: 'app-management',
        standalone: true,
        imports: [FormsModule, NgIf],
        ...
        ```
    - [ ] ESL-ESL-228 Créer un menu pour désactiver les ESLs depuis l'app web
```docker volume prune --filter all=1```
- [x] Fix des problèmes du merge anthony : 
    - [x] store article controller : 
        - [x] ajout des relations au findoneby:
        ```
            findOneByBarcode(barcode: string) {
                try {
        return this.storeArticleRepository.findOne({ where: { bar_code: barcode } });
        return this.storeArticleRepository.findOne({
            where: { bar_code: barcode },
            relations: ['esl']
        });
        ```
        - [x] row.price au lieu des price : 
        ```
        storeArticle.price !== price ||
        storeArticle.price !== row.price ||
        ```

**10 Décembre**
- [ ] Esl
    - [ ] ESL-232 Créer un menu pour changer l'image des ESLs depuis l'app web